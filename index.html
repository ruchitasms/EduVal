<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>EduVal</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { 
            --pico-primary: #00a8e8; 
            --pico-background-color: #0b0e14;
            --pico-card-background-color: #151921;
            --pico-spacing: 0.75rem;
        }
        .dashboard-grid { display: flex; gap: var(--pico-spacing); align-items: stretch; }
        .dashboard-grid > article { flex: 1; display: flex; flex-direction: column; margin-bottom: 0 !important; }
        .chart-wrapper { flex-grow: 1; min-height: 250px; position: relative; }
        .metric-val { font-size: 2.2rem; font-weight: 700; color: var(--pico-primary); transition: color 0.3s ease; }
        .sub-header { color: #888; font-size: 0.85rem; display: block; margin-top: -5px; }
        progress { display: none; margin: 10px 0; }
        table { margin: 0; font-size: 0.9rem; }
        footer { margin-top: auto; padding-top: 8px; border-top: 1px solid #2a313d; }
        .fy-label { font-size: 0.75rem; font-weight: bold; border: 1px solid; padding: 2px 6px; border-radius: 4px; }
        
        /* Mission Section */
        .mission-hub { 
            background: #1c222d; 
            padding: 1.2rem; 
            border-radius: 8px; 
            border-left: 4px solid var(--pico-primary); 
            margin-bottom: 1.5rem; 
            transition: border-color 0.3s ease;
        }
        .verdict-badge { padding: 4px 12px; border-radius: 20px; font-weight: bold; font-size: 0.8rem; }
    </style>
</head>
<body>
    <main class="container">
        <section class="mission-hub" id="themeBorder">
            <h3>EduVal - Let's learn Finance Together! ✨</h3>
            <p style="font-size: 0.95rem;">Let's bridge the gap between finance theory and reality. We're exploring live company data and understand what drives value, risk, and momentum.</p>
            <div class="grid" style="font-size: 0.85rem;">
                <div><strong>Identify Value:</strong> Use <em>EV/EBITDA</em> Shows how expensive a company is relative to the cash it generates. Lower = cheaper; higher = pricier.</div>
                <div><strong>Monitor Risk:</strong> Use <em>Net Debt/EBITDA</em> Measures debt risk. How many years of cash flow it would take to pay off all debt.</div>
                <div><strong>Enterprise Value (EV):</strong> The true cost of buying the whole company — includes debt and cash.</div>
                <div><strong>52‑Week Range:</strong> The lowest and highest price the stock traded at in the past year.</div>
                <div><strong>7‑Day Momentum:</strong> Short‑term price trend showing recent market sentiment.</div>
                <div><strong>Relative Valuation:</strong> Comparing a company’s value to peers to see if it’s cheap, fair, or expensive.</div>
            </div>
            <div> <strong>Value Labels:</strong> 1. Value Play ($< 10\text{x}$)The Logic: You are paying less than $10 for every $1 of annual cash profit (EBITDA).Context: Often found in "mature" sectors like Energy (XOM, CVX) or Banking. These companies aren't expected to double their size overnight, so their "price tag" is lower relative to their earnings.2. Fair Value ($10\text{x} - 25\text{x}$)The Logic: This is the "Standard" range for healthy, established companies.Context: Most blue-chip stocks like MSFT or GOOGL often sit in or near this range. It suggests a balance between current earnings and future growth expectations.3. Premium Growth ($> 25\text{x}$)The Logic: The market is willing to pay a high "premium" (over $25 for every $1 of current profit).Context: This is typical for High-Tech (NVDA) or Disruptive (TSLA) companies. Investors pay more now because they expect the EBITDA to explode in the future.</div>
        </section>

        <header>
            <select id="tickerSelect" onchange="runAnalysis(this.value)">
                <option value="" disabled selected>Select Company to Start Analysis...</option>
                <option value="XOM">ExxonMobil (Energy)</option>
                <option value="CVX">Chevron (Energy)</option>
                <option value="NVDA">NVIDIA (Semiconductors)</option>
                <option value="MSFT">Microsoft (Software)</option>
                <option value="GOOGL">Alphabet (Tech)</option>
                <option value="NFLX">Netflix (Entertainment)</option>
                <option value="TSLA">Tesla (Automotive)</option>
                <option value="DIS">Disney (Entertainment)</option>
                <option value="INTC">Intel (Semiconductors)</option>
                <option value="SOFI">SoFi (Fintech)</option>
            </select>
            <progress id="loader"></progress>
        </header>

        <div id="dashboard" style="display:none;">
            <div class="dashboard-grid">
                <article>
                    <header>
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h4 id="compName" style="margin:0;">-</h4>
                                <span id="industryLabel" class="sub-header">-</span>
                            </div>
                            <span id="verdictBadge" class="verdict-badge">-</span>
                        </div>
                    </header>
                    <div style="padding: 0.5rem 0;">
                        <label>EV / EBITDA Multiple</label>
                        <div class="metric-val" id="evEbitdaDisplay">-</div>
                    </div>
                    <table role="grid">
                        <tbody>
                            <tr><td>Net Debt / EBITDA</td><td align="right" id="leverageVal" style="font-weight:bold;">-</td></tr>
                            <tr><td>52-Week Range</td><td align="right" id="rangeVal" style="font-size: 0.8rem;">-</td></tr>
                            <tr><td>Enterprise Value</td><td align="right" id="evVal">-</td></tr>
                        </tbody>
                    </table>
                    <footer><span class="fy-label" id="metricsFY">-</span></footer>
                </article>

                <article>
                    <header><strong>7-Day Momentum (Calendar 2026)</strong></header>
                    <div class="chart-wrapper"><canvas id="priceChart"></canvas></div>
                    <footer>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <strong id="priceDisplay" style="color:var(--pico-primary);">Price: -</strong>
                            <small id="mktCapVal" style="color: #888;">Cap: -</small>
                        </div>
                    </footer>
                </article>
            </div>
        </div>
    </main>

    <script>
        let priceChart = null;
        const API_KEY = '1YJOf8Lz9qJUlyPUhgKqc3vpzMflW1mx';

        const sectorThemes = {
            'Energy': '#00e676', // Green
            'Semiconductors': '#ff9100', // Orange
            'Software': '#00d4ff', // Cyan
            'Tech': '#a29bfe', // Purple
            'Entertainment': '#ff4081', // Pink
            'Automotive': '#ffffff', // White/Silver
            'Fintech': '#ffcc00' // Gold
        };

        function getIndustryFromUI(ticker) {
            const select = document.getElementById('tickerSelect');
            const option = Array.from(select.options).find(opt => opt.value === ticker);
            return option ? option.text.match(/\(([^)]+)\)/)[1] : 'General';
        }

        async function runAnalysis(ticker) {
            document.getElementById('loader').style.display = 'block';
            document.getElementById('dashboard').style.display = 'none';

            try {
                const [pRes, mRes, hRes] = await Promise.all([
                    fetch(`https://financialmodelingprep.com/stable/profile?symbol=${ticker}&apikey=${API_KEY}`),
                    fetch(`https://financialmodelingprep.com/stable/key-metrics?symbol=${ticker}&apikey=${API_KEY}`),
                    fetch(`https://financialmodelingprep.com/stable/historical-price-eod/light?symbol=${ticker}&apikey=${API_KEY}`)
                ]);

                const profile = (await pRes.json())[0];
                const metrics = (await mRes.json())[0];
                const history = (await hRes.json()).slice(0, 7).reverse();

                // 1. Dynamic UI Theming
                const industry = getIndustryFromUI(ticker);
                const themeColor = sectorThemes[industry] || '#00a8e8';
                document.documentElement.style.setProperty('--pico-primary', themeColor);
                document.getElementById('themeBorder').style.borderColor = themeColor;

                // 2. Data Population
                document.getElementById('compName').innerText = profile.companyName;
                document.getElementById('industryLabel').innerText = `${industry} | ${ticker}`;
                document.getElementById('metricsFY').innerText = `Audited: FY ${metrics.fiscalYear}`;
                
                const evEbitda = metrics.evToEBITDA;
                document.getElementById('evEbitdaDisplay').innerText = evEbitda ? `${evEbitda.toFixed(2)}x` : 'N/A';
                
                // 3. Valuation Verdict Logic
                const verdict = document.getElementById('verdictBadge');
                if (evEbitda < 10) {
                    verdict.innerText = "Value Play";
                    verdict.style.backgroundColor = "rgba(0, 230, 118, 0.2)";
                    verdict.style.color = "#00e676";
                } else if (evEbitda > 25) {
                    verdict.innerText = "Premium Growth";
                    verdict.style.backgroundColor = "rgba(255, 145, 0, 0.2)";
                    verdict.style.color = "#ff9100";
                } else {
                    verdict.innerText = "Fair Value";
                    verdict.style.backgroundColor = "rgba(255, 255, 255, 0.1)";
                    verdict.style.color = "#fff";
                }

                // 4. Detailed Metrics
                const lev = metrics.netDebtToEBITDA;
                document.getElementById('leverageVal').innerText = lev ? `${lev.toFixed(2)}x` : 'N/A';
                document.getElementById('leverageVal').style.color = lev > 3 ? '#ff4d4d' : themeColor;
                document.getElementById('rangeVal').innerText = profile.range || 'N/A';
                document.getElementById('evVal').innerText = `$${(metrics.enterpriseValue / 1e9).toFixed(1)}B`;
                document.getElementById('mktCapVal').innerText = `Cap: $${(profile.marketCap / 1e9).toFixed(1)}B`;
                document.getElementById('priceDisplay').innerText = `Price: $${profile.price.toFixed(2)}`;

                // 5. Dynamic Chart
                const ctx = document.getElementById('priceChart').getContext('2d');
                if (priceChart) priceChart.destroy();
                priceChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: history.map(d => d.date.substring(5).replace('-', '/') + '/26'),
                        datasets: [{
                            data: history.map(d => d.price),
                            borderColor: themeColor,
                            backgroundColor: `${themeColor}1A`,
                            fill: true,
                            tension: 0.3,
                            pointRadius: 4
                        }]
                    },
                    options: { maintainAspectRatio: false, plugins: { legend: { display: false } } }
                });

                document.getElementById('dashboard').style.display = 'block';
            } catch (e) { alert("Data stream error."); } finally {
                document.getElementById('loader').style.display = 'none';
            }
        }
    </script>
</body>
</html>


