<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>Understanding Valuation as a Beginner ðŸ¤”</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { 
            --pico-primary: #00a8e8; 
            --pico-background-color: #0b0e14;
            --pico-card-background-color: #151921;
            --pico-spacing: 0.75rem;
        }
        .dashboard-grid { display: flex; gap: var(--pico-spacing); align-items: stretch; }
        .dashboard-grid > article { flex: 1; display: flex; flex-direction: column; margin-bottom: 0 !important; }
        .chart-wrapper { flex-grow: 1; min-height: 250px; position: relative; }
        .metric-val { font-size: 2.2rem; font-weight: 700; color: var(--pico-primary); }
        .sub-header { color: #888; font-size: 0.85rem; display: block; margin-top: -5px; }
        progress { display: none; margin: 10px 0; }
        table { margin: 0; font-size: 0.9rem; }
        footer { margin-top: auto; padding-top: 8px; border-top: 1px solid #2a313d; }
        .fy-label { font-size: 0.75rem; color: #ffcc00; font-weight: bold; }
        
        /* Learning Section Styling */
        .learning-hub { 
            background: #1c222d; 
            padding: 1.5rem; 
            border-radius: 8px; 
            border-left: 4px solid var(--pico-primary); 
            margin-top: 1.5rem; 
        }
        .learning-hub h3 { border-bottom: 1px solid #2a313d; padding-bottom: 0.5rem; }
    </style>
</head>
<body>
    <main class="container">
        <header>
            <hgroup>
                <h1>Global Equity Pulse</h1>
                <p>Fundamental Analysis & Market Momentum Dashboard</p>
            </hgroup>
            
            <select id="tickerSelect" onchange="runAnalysis(this.value)">
                <option value="" disabled selected>Select Company to Learn More...</option>
                <option value="XOM">ExxonMobil (Energy)</option>
                <option value="CVX">Chevron (Energy)</option>
                <option value="NVDA">NVIDIA (Semiconductors)</option>
                <option value="MSFT">Microsoft (Software)</option>
                <option value="GOOGL">Alphabet (Tech)</option>
                <option value="NFLX">Netflix (Entertainment)</option>
                <option value="TSLA">Tesla (Automotive)</option>
                <option value="DIS">Disney (Entertainment)</option>
                <option value="INTC">Intel (Semiconductors)</option>
                <option value="SOFI">SoFi (Fintech)</option>
            </select>
            <progress id="loader"></progress>
        </header>

        <div id="dashboard" style="display:none;">
            <div class="dashboard-grid">
                <article>
                    <header>
                        <h4 id="compName" style="margin:0;">Company Name</h4>
                        <span id="industryLabel" class="sub-header">Industry | TICKER</span>
                    </header>
                    <div style="padding: 0.5rem 0;">
                        <label>EV / EBITDA Multiple</label>
                        <div class="metric-val" id="evEbitdaDisplay">-</div>
                    </div>
                    <table role="grid">
                        <tbody>
                            <tr><td>Net Debt / EBITDA</td><td align="right" id="leverageVal" style="font-weight:bold;">-</td></tr>
                            <tr><td>Enterprise Value</td><td align="right" id="evVal">-</td></tr>
                            <tr><td>Market Cap</td><td align="right" id="mktCapVal">-</td></tr>
                        </tbody>
                    </table>
                    <footer><span class="fy-label" id="metricsFY">Audit Period: FY 2025</span></footer>
                </article>

                <article>
                    <header><strong>7-Day Price Momentum (2026)</strong></header>
                    <div class="chart-wrapper"><canvas id="priceChart"></canvas></div>
                    <footer>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <strong id="priceDisplay" style="color:var(--pico-primary);">Price: -</strong>
                            <small style="color: #888;">Live Market Trend</small>
                        </div>
                    </footer>
                </article>
            </div>

            <section class="learning-hub">
                <h3>Understanding the Valuation Framework</h3>
                <p>This project uses <strong>Relative Valuation</strong>. Instead of guessing a stock's future, we compare what the market pays for $1 of profit across different companies.</p>
                
                <div class="grid">
                    <table>
                        <thead>
                            <tr><th>Term</th><th>Practical Explanation</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>EV/EBITDA</strong></td>
                                <td>The "Acquisition Price." It tells you how many years of cash profit it takes to pay back the cost of buying the whole company.</td>
                            </tr>
                            <tr>
                                <td><strong>Net Debt/EBITDA</strong></td>
                                <td>The "Safety Check." It shows if a company is drowning in debt. Lower is better (usually under 3.0x).</td>
                            </tr>
                            <tr>
                                <td><strong>Enterprise Value</strong></td>
                                <td>The "Real Price." It's Market Cap + Debt - Cash. It's what an acquirer actually pays.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="margin-top:1rem; padding: 1rem; background: #0b0e14; border-radius: 5px;">
                    <strong>How to Analyze:</strong> If the <strong>Price Chart</strong> (Right) is going up while the <strong>EV/EBITDA</strong> (Left) stays low compared to peers, the company might be a "Value Gain." If the price is up but the multiple is extremely high, it may be "Overhyped."
                </div>
            </section>
        </div>
    </main>

    <script>
        let priceChart = null;
        const API_KEY = '1YJOf8Lz9qJUlyPUhgKqc3vpzMflW1mx';

        function getIndustryFromUI(ticker) {
            const select = document.getElementById('tickerSelect');
            const option = Array.from(select.options).find(opt => opt.value === ticker);
            return option ? option.text.match(/\(([^)]+)\)/)[1] : 'General';
        }

        async function runAnalysis(ticker) {
            document.getElementById('loader').style.display = 'block';
            document.getElementById('dashboard').style.display = 'none';

            try {
                const [pRes, mRes, hRes] = await Promise.all([
                    fetch(`https://financialmodelingprep.com/stable/profile?symbol=${ticker}&apikey=${API_KEY}`),
                    fetch(`https://financialmodelingprep.com/stable/key-metrics?symbol=${ticker}&apikey=${API_KEY}`),
                    fetch(`https://financialmodelingprep.com/stable/historical-price-eod/light?symbol=${ticker}&apikey=${API_KEY}`)
                ]);

                const pData = await pRes.json();
                const mData = await mRes.json();
                const hData = await hRes.json();

                const profile = pData[0];
                const metrics = mData[0];
                const historyRaw = hData.slice(0, 7).reverse();

                document.getElementById('compName').innerText = profile.companyName;
                document.getElementById('industryLabel').innerText = `${getIndustryFromUI(ticker)} | ${ticker}`;
                document.getElementById('metricsFY').innerText = `Period: FY ${metrics.fiscalYear}`;
                
                document.getElementById('evEbitdaDisplay').innerText = metrics.evToEBITDA ? `${metrics.evToEBITDA.toFixed(2)}x` : 'N/A';
                const lev = metrics.netDebtToEBITDA;
                document.getElementById('leverageVal').innerText = lev ? `${lev.toFixed(2)}x` : 'N/A';
                document.getElementById('leverageVal').style.color = lev > 3 ? '#ff4d4d' : '#00e676';

                document.getElementById('evVal').innerText = `$${(metrics.enterpriseValue / 1e9).toFixed(2)}B`;
                document.getElementById('mktCapVal').innerText = `$${(profile.marketCap / 1e9).toFixed(2)}B`;
                document.getElementById('priceDisplay').innerText = `Latest Price: $${profile.price.toFixed(2)}`;

                const ctx = document.getElementById('priceChart').getContext('2d');
                if (priceChart) priceChart.destroy();
                
                priceChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: historyRaw.map(d => d.date.substring(5).replace('-', '/') + '/26'),
                        datasets: [{
                            data: historyRaw.map(d => d.price),
                            borderColor: '#00a8e8',
                            backgroundColor: 'rgba(0, 168, 232, 0.1)',
                            fill: true,
                            tension: 0.3,
                            pointRadius: 4
                        }]
                    },
                    options: { maintainAspectRatio: false, plugins: { legend: { display: false } } }
                });

                document.getElementById('dashboard').style.display = 'block';
            } catch (e) {
                console.error(e);
            } finally {
                document.getElementById('loader').style.display = 'none';
            }
        }
    </script>
</body>
</html>
